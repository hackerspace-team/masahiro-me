FROM rust:1.69.0

RUN curl -fsSL https://deb.nodesource.com/setup_18.x | bash -

RUN apt-get update && apt-get install -y make nodejs g++
RUN npm install -g yarn

COPY . .

# RUN cargo update

RUN rustup target add wasm32-unknown-unknown

RUN cargo install --locked trunk
# RUN cargo install trunk --version 0.16.0

RUN cargo build --release
# RUN rustc --version

# WORKDIR /usr/src/app
#
# # Copy Node.js and yarn from the previous stage
# COPY --from=node /usr/local/bin/node /usr/local/bin/
# COPY --from=node /usr/local/bin/yarn /usr/local/bin/



# CMD ["make", "ssr_dev"]

